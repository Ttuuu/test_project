<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<p><code>is_prime()</code> can terminate without returning a value (returning <code>None</code>) if the input is large, but not divisible by a prime under 1000.  You should handle that explicitly (perhaps raise an exception).</p>

<p>Bug? <code>prime_factors(45)</code> will return <code>[3,5]</code>, but <code>3*5 != 45</code>.  You might want to handle factors like <span class="math-container">\$p^n\$</span>, where p is a prime.  <strong>Update</strong>  Ok, not a bug. (I didn't run the code with an official interpreter; just my eyeball interpreter, which is a bit buggy.)  The <code>while</code> loop around the <code>for</code> loop will <em>eventually</em> catch that the repeated primes.  Still, you're doing a lot of extra work when you could just keep factoring out the prime factor.  If that is done, then you don't need the outer <code>while</code> loop.</p>

<p>Your loop <code>for f in range(2, int(n/2+1)):</code> does not update the end point as <code>n</code> gets smaller with successive factors being found.  In the case of 45, it loops up to 22, despite finding the last factor of 5 seventeen iterations earlier. </p>
    </div>