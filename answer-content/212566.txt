<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<p>I agree with the advice in <a href="https://codereview.stackexchange.com/a/212546/120114">the answer by user4963355</a>. In <a href="https://www.youtube.com/watch?v=GtB5DAfOWMQ" rel="nofollow noreferrer">this presentation about cleaning up code</a>  Rafael Dohms talks about limiting the indentation level to one per method and avoiding the <code>else</code> keyword. (<a href="https://www.slideshare.net/rdohms/bettercode-phpbenelux212alternate/11-OC_1Only_one_indentation_level" rel="nofollow noreferrer">see the slides here</a>).</p>

<p>One other suggestion I have is whenever you find an element to add to the message, e.g. values in <code>$v[1]</code> or <code>$temp_p</code>, instead of appending them to <code>$msg</code>, push them into an array. Instead of checking if <code>$found</code> is 0, you can check if the length of the array is 0 (using <a href="https://php.net/count" rel="nofollow noreferrer"><code>count()</code></a>). If it is not 0, construct the message using <a href="https://php.net/implode" rel="nofollow noreferrer"><code>implode()</code></a>. That way there is no need to remove excess characters from the end of the string and you can use the <em>semantics</em> of "<em>found</em>" using <code>count()</code>.</p>
    </div>