<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<p>Not an review, but an extended comment:</p>

<p>I don't know how this solution can be optimized. The expected solution is radically different, and is based on a couple of theorems from number theory.</p>

<p>You should check whether the number is</p>

<ul>
<li>A perfect square (the answer is obviously 1), or</li>
<li>is a sum of 2 squares (the answer is obviously 2), or</li>
<li>not a Legendre's number, that is \$n = 4^a(8b + 7)\$ (<a href="https://en.wikipedia.org/wiki/Legendre%27s_three-square_theorem" rel="nofollow noreferrer">the answer is 3</a>)</li>
</ul>

<p>Otherwise, <a href="https://en.wikipedia.org/wiki/Lagrange%27s_four-square_theorem" rel="nofollow noreferrer">the answer is 4</a>.</p>
    </div>