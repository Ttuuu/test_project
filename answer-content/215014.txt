<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<p>Is the vector-of-vectors representation imposed on you, or can you change it?  It's going to be more efficient to allocate a single vector, and use simple arithmetic to convert row/column representation into a linear index.  It's then possible to provide a transpose <em>view</em> without needing to move all the elements, which may be useful in some circumstances (in others, you'll want to actually perform the transpose, to keep rows contiguous in cache).</p>

<p>If you have a <em>square</em> matrix, a simpler way to transpose (which may or may not be faster - but you'll be benchmarking anyway, to confirm) is to take a copy of the input, and then <code>swap()</code> the elements across the leading diagonal.  This is likely to be most advantageous when the elements are trivially copyable, such as the <code>double</code> you're using here.</p>
    </div>