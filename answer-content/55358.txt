<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<ul>
<li><p>Don't use <code>null</code>, but instead <code>Option[Connection]</code>.  <code>null</code> is frowned upon in Scala.</p></li>
<li><p>It looks quite odd that <code>getConnection(ss:Connection)</code> takes in a <code>Connection</code>.  That method either sets the connection (opposite of get!), or initialize and returns the connection if the argument is null.  Create two different methods.  It does not make much sense as it is... it looks like you just wanted to use pattern matching somewhere.</p></li>
<li><p>You can get rid of the whole object <code>RabbitMQConnection</code> and replace your lazy initialization of the connection with the Scala <code>lazy</code> keyword.  (EDIT: actually, it is not clear what exactly you should do with the connection, since you also have to always check if it is still open.  I'll let you figure this out, but you should be aware of Scala's <code>lazy</code>.) </p></li>
<li><p>Since <code>setQ</code> only needs the <code>connection</code> to create a <code>Channel</code>, I would just have a method to fetch the <code>Channel</code>.  That method would check if the <code>Connection</code> is open and restart it if needed.   (Separation of concerns.)</p></li>
<li><p>I hope all the <code>println</code> are just for debugging and will be removed.  If you keep those, use some logging service instead, even if it just prints to console in the end.  More generally, you should strive for separation of concerns and find a way to separate the code that actually does something and the logging code.</p></li>
<li><p>I would declare the return type of <code>setQ</code>.</p></li>
<li><p>About that return type: instead of <code>Map("result" -&gt; "success")</code> and <code>Map("result" -&gt;"error")</code> use Scala's <a href="http://www.scala-lang.org/files/archive/nightly/docs/library/index.html#scala.util.Try" rel="nofollow"><code>Try</code></a>.  <code>Try</code> is actually a monad so you'll be able to call <code>map</code> and <code>flatMap</code> on the result of <code>setQ</code>.</p></li>
</ul>
    </div>