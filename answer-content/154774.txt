<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<p>You have a conditional based on the type of object. You can apply the <a href="https://refactoring.com/catalog/replaceConditionalWithPolymorphism.html" rel="nofollow noreferrer">Replace Conditional with Polymorphism</a> refactoring pattern. </p>

<p>In this case, you might have a base class <code>Product</code>, with subclasses <code>DigitalProduct</code> and <code>PhysicalProduct</code> which each implement <code>discount()</code>. I don't think it's sensible to have a <code>MembershipProduct</code> class - membership should be related to the buyer. From an OO perspective, it should feel wrong when you have methods like <code>discount_for_X()</code> - the method should be part of the respective class so that you can make use of polymorphism.</p>
    </div>