<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<p>It looks optimized to me, but you can add a check for <code>maxDepth &gt;= 1000</code> and break the while loop if true.</p>
    </div>