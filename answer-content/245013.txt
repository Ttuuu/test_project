<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<p>I believe it's usual, and more efficient to store the balance of each node ( -1, 0, +1 ) in the node rather than computing it each time.</p>
<p>Another point : I think you could use some more elif statements, only one kind of rotation will apply.</p>
    </div>