<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<p>What hurts your performance is filling the array with <code>max_count</code>. So don't do it. Imply it. The trick is all there, and it makes this slightly different from trying to execute a literal transcription of the problem.</p>

<p>Spelling out the details would rob pundits of the enjoyment of puzzling...</p>

<p>I don't know about Codility, but elsewhere the tasks can often be solved with efficient coding of a naive algorithm (especially in C/C++) instead of solving the puzzle algorithmically. Sometimes I try the 'raw firepower' solution as well, if it promises an interesting challenge. But only after finding the real solution, since each puzzle is basically about finding a specific trick that goes beyond the naive algorithm.</p>

<p>Given that people do these challenges for the puzzle value I think it would defeat their purpose if we posted complete solutions.</p>

<p>P.S.: the sketched solution reduces runtime only to M * log(M) + N or M * C + N but that should be sufficient (and enough of a hint).</p>
    </div>