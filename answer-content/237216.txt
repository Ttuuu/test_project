<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<p>You're trying to reinvent the wheel... This specific challenge was discussed in answers to <a href="https://stackoverflow.com/q/81870/1593077">this SO question</a>: Read <a href="https://stackoverflow.com/a/20170989/1593077">HowardHinnant's long answer</a>, then read the final, pretty, <code>constexpr</code> answer <a href="https://stackoverflow.com/a/56766138/1593077">here</a>.  @Snowhawk quoted the code there - now you have some references and the build-up to the final form of the code.</p>
    </div>