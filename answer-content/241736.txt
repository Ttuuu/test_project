<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<h3>Approach 3</h3>

<p>As a third approach, you might consider a hierarchical state machine.  The system as a whole could have a state machine with states such as starting_up, running, shutting_down.  Then different kinds of components or groups of components could have state machines whose transition table depend on the system state (or there are different tables for different states).  Likewise, the system can change state based on the states of the sub state machines (e.g., when they are all running, then the system can transition to the running state). Further, each component has it's own state machine that depends on the state of it's parent state machine.  The state machines at any given level are more or less independent of each other.  They change state based on the inputs, but unrecognized inputs get passed up to their parent state machine.</p>

<p>Consider a basic HVAC system. The system may have states: OFF, COOL, HEAT.  A thermostat can send a signal that the temperature is above or below the temperature set point. The A/C component has a state machine that response to the thermostat signal if the system state machine is the the COOL state.  It can also respond to internal signals such as compressor temperature, or refrigerant suction pressure, etc.  Similarly, the furnace can respond if the system is in the HEAT state, and can also respond to internal signals such as low pilot light temperature or high flue temperature.</p>
    </div>