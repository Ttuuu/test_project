<div class="s-prose s-prose__disable-spoiler-hover js-post-body" itemprop="text">
<p>I suggest using the <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html" rel="noreferrer">POSIX <code>getline()</code> function</a> as it does what the posted code is trying to do.  However, it does take a third parameter (a pointer to a variable to receive the length of the read line). It also returns the number of bytes read (or an EOF indicator).</p>
    </div>